<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis-org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="repository.mapper.foodMapper">
	<cache></cache>

	<select id="selectFoodNumber" resultType="Integer">
		select count(food_no)
		from food
	</select>

	<insert id="insertFood" parameterType="Food">
		INSERT INTO food
		(food_no, seller_email, food_cat_a_no, food_cat_b_no, food_cat_c_no, food_name,
		food_quant, food_expiry_date, food_origin, food_sale, food_flavor,
		food_price, food_carbo, food_protein, food_fat, food_cal, food_size, food_original, food_stored)
		VALUES (#{foodNo}, #{sellerEmail}, #{foodCatANo}, #{foodCatBNo},
		#{foodCatCNo}, #{foodName}, #{foodQuant}, #{foodExpiryDate},
		#{foodOrigin}, #{foodSale}, #{foodFlavor}, #{foodPrice}, #{foodCarbo},
		#{foodProtein}, #{foodFat}, #{foodCal}, #{foodSize}, #{foodOriginal}, #{foodStored})
	</insert>
	
	

	<resultMap type="FoodCatC" id="ccaSelectMap">
		<id column="food_cat_c_no" jdbcType="BIGINT" property="foodCatCNo" />
		<result column="food_cat_c_name" jdbcType="VARCHAR"
			property="foodCatCName" />
	</resultMap>
	
	<select id="ccaSelect" 
		resultMap="ccaSelectMap">
		SELECT
		food_cat_c_no,
		food_cat_c_name
		FROM food_cat_c
	</select>
	
	
	<resultMap type="FoodCatA" id="acaSelectMap">
		<id column="food_cat_a_no" jdbcType="BIGINT" property="foodCatANo" />
		<id column="food_cat_b_no" jdbcType="BIGINT"
			property="foodCatBNo" />
		<id column="food_cat_c_no" jdbcType="BIGINT"
			property="foodCatCNo" />
		<result column="food_cat_a_name" jdbcType="VARCHAR"
			property="foodCatAName" />
	</resultMap>

	<select id="acaSelect" resultMap="acaSelectMap" parameterType="FoodCatA">
		SELECT
		food_cat_a_no,
		food_cat_b_no,
		food_cat_c_no,
		food_cat_a_name
		FROM food_cat_a
		WHERE
		food_cat_c_no = #{foodCatCNo} and food_cat_b_no =
		#{foodCatBNo}

	</select>


	<resultMap type="FoodCatB" id="bcaSelectMap">
		<id column="food_cat_b_no" jdbcType="BIGINT" property="foodCatBNo" />
		<id column="food_cat_c_no" jdbcType="BIGINT"
			property="foodCatCNo" />
		<result column="food_cat_b_name" jdbcType="VARCHAR"
			property="foodCatBName" />
	</resultMap>

	<select id="bcaSelect" parameterType="FoodCatC"
		resultMap="bcaSelectMap">
		SELECT
		food_cat_b_no,
		food_cat_c_no,
		food_cat_b_name
		FROM
		food_cat_b
		WHERE food_cat_c_no = #{foodCatCNo}
	</select>
	
	<update id="updateFood" parameterType="Food">
		UPDATE food 
		SET
		FOOD_CAT_A_NO = #{foodCatANo},
		FOOD_CAT_B_NO = #{foodCatBNo},
		FOOD_CAT_C_NO = #{foodCatCNo},  
		FOOD_NAME = #{foodName},   
		FOOD_QUANT = #{foodQuant},
		FOOD_EXPIRY_DATE = #{foodExpiryDate},
		FOOD_ORIGIN = #{foodOrigin},    
		FOOD_SALE = #{foodSale},       
		FOOD_FLAVOR = #{foodFlavor},     
		FOOD_PRICE = #{foodPrice},    
		FOOD_CARBO = #{foodCarbo},    
		FOOD_PROTEIN = #{foodProtein},    
		FOOD_FAT = #{foodFat},      
		FOOD_CAL = #{foodCal},        
		FOOD_SIZE = #{foodSize},      
		FOOD_ORIGINAL = #{foodOriginal},  
		FOOD_STORED = #{foodStored} 
		WHERE FOOD_NO = #{foodNo}
	</update>
	
	
	<resultMap type="Food" id="sellerFoodListMap">
		<id column="food_no" jdbcType="BIGINT" property="foodNo" />
		<id column="food_cat_a_no" jdbcType="BIGINT" property="foodCatANo" />
		<id column="food_cat_b_no" jdbcType="BIGINT" property="foodCatBNo" />
		<id column="food_cat_c_no" jdbcType="BIGINT" property="foodCatCNo" />
		<result column="food_name" jdbcType="VARCHAR" property="foodName" />
		<result column="food_quant" jdbcType="BIGINT" property="foodQuant" />
		<result column="food_expiry_date" jdbcType="VARCHAR" property="foodExpiryDate" />
		<result column="food_origin" jdbcType="BIGINT" property="foodOrigin" />
		<result column="food_sale" jdbcType="BIGINT" property="foodSale" />
		<result column="food_flavor" jdbcType="VARCHAR" property="foodFlavor" />
		<result column="food_price" jdbcType="BIGINT" property="foodPrice" />
		<result column="food_carbo" jdbcType="BIGINT" property="foodCarbo" />
		<result column="food_protein" jdbcType="BIGINT" property="foodProtein" />
		<result column="food_fat" jdbcType="BIGINT" property="foodFat" />
		<result column="food_cal" jdbcType="BIGINT" property="foodCal" />
		<result column="food_size" jdbcType="BIGINT" property="foodSize" />
		<result column="food_original" jdbcType="VARCHAR" property="foodOriginal" />
		<result column="food_stored" jdbcType="VARCHAR" property="foodStored" />
	</resultMap>
	
	<select id="sellerFoodList" parameterType="String" resultMap="sellerFoodListMap">
		SELECT
		food_no,
		seller_email,
		food_cat_a_no,
		food_cat_b_no,
		food_cat_c_no,
		food_name,
		food_quant,
		food_expiry_date,
		food_origin,
		food_sale,
		food_flavor,
		food_price,
		food_carbo,
		food_protein,
		food_fat,
		food_cal,
		food_size,
		food_original,
		food_stored
		FROM
		food
		WHERE seller_email = #{sellerEmail}
	</select>
	
	
	<resultMap type="Food" id="selectSellerFoodMap">
		<id column="food_no" jdbcType="BIGINT" property="foodNo" />
		<id column="food_cat_a_no" jdbcType="BIGINT" property="foodCatANo" />
		<id column="food_cat_b_no" jdbcType="BIGINT" property="foodCatBNo" />
		<id column="food_cat_c_no" jdbcType="BIGINT" property="foodCatCNo" />
		<result column="food_name" jdbcType="VARCHAR" property="foodName" />
		<result column="food_quant" jdbcType="BIGINT" property="foodQuant" />
		<result column="food_expiry_date" jdbcType="VARCHAR" property="foodExpiryDate" />
		<result column="food_origin" jdbcType="BIGINT" property="foodOrigin" />
		<result column="food_sale" jdbcType="BIGINT" property="foodSale" />
		<result column="food_flavor" jdbcType="VARCHAR" property="foodFlavor" />
		<result column="food_price" jdbcType="BIGINT" property="foodPrice" />
		<result column="food_carbo" jdbcType="BIGINT" property="foodCarbo" />
		<result column="food_protein" jdbcType="BIGINT" property="foodProtein" />
		<result column="food_fat" jdbcType="BIGINT" property="foodFat" />
		<result column="food_cal" jdbcType="BIGINT" property="foodCal" />
		<result column="food_size" jdbcType="BIGINT" property="foodSize" />
		<result column="food_original" jdbcType="VARCHAR" property="foodOriginal" />
		<result column="food_stored" jdbcType="VARCHAR" property="foodStored" />
	</resultMap>
	
	<select id="selectSellerFood" parameterType="Integer" resultMap="selectSellerFoodMap">
		SELECT
		food_no,
		seller_email,
		food_cat_a_no,
		food_cat_b_no,
		food_cat_c_no,
		food_name,
		food_quant,
		food_expiry_date,
		food_origin,
		food_sale,
		food_flavor,
		food_price,
		food_carbo,
		food_protein,
		food_fat,
		food_cal,
		food_size,
		food_original,
		food_stored
		FROM
		food
		WHERE food_no = #{foodNo}
	</select>
	
<delete id="deleteFood" parameterType="String">
	DELETE
	FROM food
	WHERE food_no = #{foodNo}
</delete>


<!-- <resultMap type="Food" id="selectAllFoodMap">
		<id column="food_no" jdbcType="BIGINT" property="foodNo" />
		<id column="seller_email" jdbcType="VARCHAR" property="sellerEmail" />
		<id column="food_cat_a_no" jdbcType="BIGINT" property="foodCatANo" />
		<id column="food_cat_b_no" jdbcType="BIGINT" property="foodCatBNo" />
		<id column="food_cat_c_no" jdbcType="BIGINT" property="foodCatCNo" />
		<result column="food_name" jdbcType="VARCHAR" property="foodName" />
		<result column="food_quant" jdbcType="BIGINT" property="foodQuant" />
		<result column="food_expiry_date" jdbcType="VARCHAR" property="foodExpiryDate" />
		<result column="food_origin" jdbcType="BIGINT" property="foodOrigin" />
		<result column="food_sale" jdbcType="BIGINT" property="foodSale" />
		<result column="food_flavor" jdbcType="VARCHAR" property="foodFlavor" />
		<result column="food_price" jdbcType="BIGINT" property="foodPrice" />
		<result column="food_carbo" jdbcType="BIGINT" property="foodCarbo" />
		<result column="food_protein" jdbcType="BIGINT" property="foodProtein" />
		<result column="food_fat" jdbcType="BIGINT" property="foodFat" />
		<result column="food_cal" jdbcType="BIGINT" property="foodCal" />
		<result column="food_size" jdbcType="BIGINT" property="foodSize" />
		<result column="food_original" jdbcType="VARCHAR" property="foodOriginal" />
		<result column="food_stored" jdbcType="VARCHAR" property="foodStored" />
</resultMap> -->
	
<!-- <select id="selectFoodList" resultMap="selectAllFoodMap">
		select food_no,
		a.seller_email,
        a.STORE_NAME,
		food_cat_a_no,
		food_cat_b_no,
		food_cat_c_no,
		food_name,
		food_sale,
		food_price,
		food_size,
		food_original,
		food_stored
		from SELLER_APPLICATION a, food f
		where f.seller_email = a.seller_email;
</select> -->

</mapper>
